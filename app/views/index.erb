<% if !current_user %>
  <div class='popup'>
    <h2>Login or Signup</h2>
    <form action='/login' method='POST'>
      <input required type='email' id='email' name='email' placeholder='Email' /><br>
      <input required minlength="8" type='password' id='password' name='password' placeholder='Password' /><br>
      <input type='submit' id='submit' value='Submit' />
    </form>
  </div>
<% end %>
<div class='popup' id="new" style="display: none;">
  <h2>New Timer</h2>
  <form action='/timer' method='POST'>
    <input type='text' id="label" disabled="disabled" value="Minutes" />
    <input type='text' id="label" disabled="disabled" value="Seconds" />
    <input type='number' min='0' max='99' id='minutes' name='minutes' placeholder='00' /> :
    <input type='number' min='0' max='59' id='seconds' name='seconds' placeholder='00' />
    <br>
    <input type='submit' id='submit' value='Submit' />
    <input type="reset" value="Cancel" onclick="togglePopup('#new')" />
  </form>
</div>
<div class='popup' id="edit" style="display: none;">
  <h2>Edit Timer</h2>
  <form action='/timer/id/edit' method='POST'>
  <input id="hidden" type="hidden" name="_method" value="patch">
    <input type='text' id="label" disabled="disabled" value="Minutes" />
    <input type='text' id="label" disabled="disabled" value="Seconds" />
    <input type='number' min='0' max='99' id='minutes' name='minutes' placeholder='00' value="" /> :
    <input type='number' min='0' max='59' id='seconds' name='seconds' placeholder='00' value="" /><br>
    <input type='submit' id='submit' value='Submit' />
    <input type="reset" value="Cancel" onclick="togglePopup('#edit')" />
  </form>
</div>
<div class='popup' id="delete" style="display: none;">
  <h2>Delete Timer?</h2>
  <form action='/timer/id/delete' method='POST'>
    <input id="hidden" type="hidden" name="_method" value="delete">
    <input type='submit' id='submit' value='Delete' style="background: #f86565;" />
    <input type="reset" value="Cancel" onclick="togglePopup('#delete')" />
  </form>
</div>
<div class="container">
  <div class="sidebar-background sidebar-collapsed"></div>
  <div class="sidebar sidebar-collapsed">
    <ul class="nav-list">
      <li class="nav-item">
        <i class="icon ri-home-6-line"></i>
        <span class="text">Work</i></span>
      </li>
      <li class="nav-item">
        <i onclick="togglePopup('#new')" class="icon ri-add-circle-line" title="New Timer"></i>
      </li>
    </ul>
  </div>
  <ul class="timer-list">
    <% if current_user %>
      <% current_user.timers.each do |timer| %>
        <span id="<%= timer.id %>_remaining" class="bar-text" title="<%= seconds_string(timer.seconds) %>"><%= seconds_string(timer.remaining) %></span>
        <li class="timer">
          <progress id="<%= timer.id %>" class="tool progress timer-bg" max="100" value="<%= (timer.remaining * 100) / timer.seconds %>" running="<%= timer.running %>" seconds="<%= timer.seconds %>" remaining="<%= timer.remaining %>"></progress>
        </li>
      <% end %>
    <% end %>
  </ul>
</div>
